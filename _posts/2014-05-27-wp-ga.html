---
layout: post
status: publish
published: true
title: 自己流でWordPressにGoogle Analyticsのトラッキングコードを追加する
author:
  display_name: さんきち
  login: sankichi92
  email: ''
  url: http://sankichi.net
author_login: sankichi92
author_email: ''
author_url: http://sankichi.net
wordpress_id: 712
wordpress_url: http://sankichi.net/?p=712
date: '2014-05-27 00:31:39 +0900'
date_gmt: '2014-05-26 15:31:39 +0900'
categories:
- Others
comments: []
---
<p>WordPressにGoogle Analyticsのトラッキングコードを追加する方法を説明しているWebページはたくさんあります。しかし，そのどれもが僕にはしっくりきませんでした。よく紹介されているのは次の3つです。</p>
<ol>
<li>テーマのテンプレートphpファイルに直接書き込む</li>
<li>テーマのfunctions.phpを編集する</li>
<li><a href="https://wordpress.org/plugins/google-analytics-for-wordpress/" target="_blank">Google Analytics for WordPress</a> 等のプラグインを使う</li>
</ol>
<p><!--more-->
<p>僕がこれらを気に入らない理由ですが，まず，1,2の方法ではテーマにデザインと関係のないコードを書くことになります。これは，デザインはテーマ，機能はプラグイン，という役割分担に反します。また，このやり方ではテーマ変更の度にトラッキングコードを貼り直さねばなりません。次に3の方法ですが，わざわざ他人の作ったプラグイン入れて管理画面からGUIで設定するほどのことでもないでしょう。なんといっても指定されたJSのコードを加えるだけですからね。</p>
<p>というわけで，Google Analyticsのトラッキングコードを追加する自前のプラグインを作りました。プラグインのコードは以下のとおりです。たった4行。</p>
<p>[php]function yutorism_ga() {<br />
    wp_enqueue_script( 'google-analytics', plugins_url( 'ga-start.js', __FILE__ ) );<br />
}<br />
add_action( 'wp_enqueue_scripts', 'yutorism_ga' );[/php]</p>
<p>「ga-start.js」というのは，トラッキングコードをJSファイルにしてPHPファイルと同じ階層に入れたものです。上記のコードをプラグインの説明の下に書いて有効化すれば，headタグ内にga-start.jsが挿入されます。</p>
<h2>参考Webページ</h2>
<ul>
<li><a href="http://wpdocs.sourceforge.jp/プラグインの作成" target="_blank">プラグインの作成 - WordPress Codex 日本語版</a></li>
<li><a href="http://wpdocs.sourceforge.jp/プラグイン_API" target="_blank">プラグイン API - WordPress Codex 日本語版</a></li>
<li><a href="http://elearn.jp/wpman/function/wp_enqueue_script.html" target="_blank">wp_enqueue_script:WordPress私的マニュアル</a></li>
</ul>
